{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/location-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate,Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ProfilePage(_ref){var _user$profile;let{user,onLocationUpdate}=_ref;const[userLocations,setUserLocations]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[editingLocation,setEditingLocation]=useState(null);const[editForm,setEditForm]=useState({text:'',newMedia:[]});const[mediaToDelete,setMediaToDelete]=useState([]);const navigate=useNavigate();const fetchUserLocations=async()=>{try{setLoading(true);setError(null);const token=localStorage.getItem('token');console.log('Fetching with token:',token);const endpoint=user.isAdmin?'http://localhost:3000/api/locations':'http://localhost:3000/api/user/locations';const response=await fetch(endpoint,{headers:{'Authorization':\"Bearer \".concat(token)}});console.log('Response status:',response.status);if(!response.ok){throw new Error('Failed to fetch locations');}const data=await response.json();console.log('Fetched locations:',data);setUserLocations(data);setLoading(false);}catch(error){console.error('Error fetching user locations:',error);setError('Failed to fetch locations');setLoading(false);}};useEffect(()=>{if(user){fetchUserLocations();}else{setLoading(false);}},[user]);useEffect(()=>{console.log('Current user object:',user);},[user]);const handleDelete=async locationId=>{if(window.confirm('Are you sure you want to delete this location?')){try{console.log('Attempting to delete location:',locationId);console.log('User ID:',user._id);const token=localStorage.getItem('token');const response=await fetch(\"http://localhost:3000/api/locations/\".concat(locationId),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});console.log('Delete response status:',response.status);if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to delete location');}setUserLocations(userLocations.filter(loc=>loc._id!==locationId));onLocationUpdate();}catch(err){console.error('Delete error:',err);setError(err.message);}}};const handleEdit=location=>{console.log('Edit clicked for location:',location._id);console.log('Current user:',user);console.log('Location creator:',location.creator);setEditingLocation(location);setEditForm({text:location.content.text,newMedia:[]});};const handleMediaDelete=index=>{setMediaToDelete([...mediaToDelete,index]);};const handleUpdate=async locationId=>{try{console.log('Attempting to update location:',locationId);console.log('Form data:',editForm);// Debug log\nconst token=localStorage.getItem('token');// Create FormData to handle both text and files\nconst formData=new FormData();formData.append('text',editForm.text);// Add any new media files\nif(editForm.newMedia&&editForm.newMedia.length>0){editForm.newMedia.forEach(file=>{formData.append('media',file);});}// Add media deletion indexes if any\nif(mediaToDelete.length>0){formData.append('deleteMediaIndexes',JSON.stringify(mediaToDelete));}const response=await fetch(\"http://localhost:3000/api/locations/\".concat(locationId),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token)// Note: Don't set Content-Type here, let browser set it for FormData\n},body:formData});console.log('Update response status:',response.status);if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to update location');}const updatedLocation=await response.json();console.log('Updated location:',updatedLocation);setUserLocations(prevLocations=>prevLocations.map(loc=>loc._id===locationId?updatedLocation:loc));setEditingLocation(null);setMediaToDelete([]);setEditForm({text:'',newMedia:[]});onLocationUpdate();}catch(err){console.error('Update error:',err);setError(err.message);}};const handleImmediateMediaDelete=async(locationId,mediaIndex)=>{try{console.log('Attempting to delete media at index:',mediaIndex);const token=localStorage.getItem('token');const response=await fetch(\"http://localhost:3000/api/locations/\".concat(locationId),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({deleteMediaIndexes:JSON.stringify([mediaIndex])})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to delete media');}const updatedLocation=await response.json();setUserLocations(userLocations.map(loc=>loc._id===locationId?updatedLocation:loc));onLocationUpdate();}catch(error){console.error('Error deleting media:',error);setError(error.message);}};if(!user){return/*#__PURE__*/_jsx(\"div\",{children:\"Please log in to view your profile.\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchUserLocations,style:{padding:'8px 16px',backgroundColor:'#2196F3',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',marginTop:'10px'},children:\"Retry\"})]});}if(loading){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',textAlign:'center',display:'flex',flexDirection:'column',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#666'},children:\"Fetching your locations...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',maxWidth:'1200px',margin:'0 auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px',backgroundColor:'#f5f5f5',padding:'20px',borderRadius:'8px',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{style:{marginBottom:'8px',color:'#333'},children:[\"Welcome, \",(user===null||user===void 0?void 0:(_user$profile=user.profile)===null||_user$profile===void 0?void 0:_user$profile.name)||'User']}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#666',fontSize:'14px'},children:[user===null||user===void 0?void 0:user.email,user.isAdmin&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'8px',color:'#2196F3'},children:\"(Admin)\"})]})]}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{style:{padding:'8px 16px',backgroundColor:'#2196F3',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',transition:'background-color 0.3s'},children:\"Back to Map\"})})]}),/*#__PURE__*/_jsx(\"h3\",{children:user.isAdmin?'All Locations':'Your Locations'}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(315px, 1fr))',gap:'20px',justifyContent:'center',padding:'20px',maxWidth:'1200px',margin:'0 auto'},children:userLocations.map(location=>{var _location$creator$pro,_location$content$med,_location$content$med2;return/*#__PURE__*/_jsxs(\"div\",{style:{width:'275px',height:'275px',padding:'15px',border:'1px solid #ddd',borderRadius:'8px',backgroundColor:'white',display:'flex',flexDirection:'column',overflow:'hidden',boxShadow:'0 2px 4px rgba(0,0,0,0.1)',margin:'0 auto'},children:[location.creator._id!==user._id&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#666',marginBottom:'8px'},children:[\"Created by: \",((_location$creator$pro=location.creator.profile)===null||_location$creator$pro===void 0?void 0:_location$creator$pro.name)||location.creator.email]}),(editingLocation===null||editingLocation===void 0?void 0:editingLocation._id)===location._id?/*#__PURE__*/// Edit mode\n_jsxs(\"div\",{style:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"textarea\",{value:editForm.text,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{text:e.target.value})),style:{flex:'1',marginBottom:'10px',padding:'8px',borderRadius:'4px',border:'1px solid #ddd',resize:'none'}}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'10px',maxHeight:'100px',overflow:'auto'},children:(_location$content$med=location.content.mediaUrls)===null||_location$content$med===void 0?void 0:_location$content$med.map((url,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'5px',position:'relative',height:'60px',width:'100%'},children:[location.content.mediaTypes[index].startsWith('video/')?/*#__PURE__*/_jsxs(\"video\",{style:{width:'100%',height:'100%',objectFit:'cover',borderRadius:'4px'},children:[/*#__PURE__*/_jsx(\"source\",{src:\"http://localhost:3000/\".concat(url),type:location.content.mediaTypes[index]}),\"Your browser does not support the video tag.\"]}):/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:3000/\".concat(url),alt:\"Media \".concat(index+1),style:{width:'100%',height:'100%',objectFit:'cover',borderRadius:'4px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleImmediateMediaDelete(location._id,index),style:{position:'absolute',top:'5px',right:'5px',padding:'2px 5px',backgroundColor:'rgba(244, 67, 54, 0.9)',color:'white',border:'none',borderRadius:'2px',cursor:'pointer',fontSize:'12px'},children:\"Delete\"})]},index))}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,accept:\"image/*,video/*\",onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{newMedia:Array.from(e.target.files)})),style:{marginBottom:'5px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUpdate(location._id),style:{flex:1,padding:'8px',backgroundColor:'#4CAF50',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingLocation(null);setMediaToDelete([]);},style:{flex:1,padding:'8px',backgroundColor:'#666',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"Cancel\"})]})]}):/*#__PURE__*/// Display mode\n_jsxs(\"div\",{style:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1',overflow:'auto',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px',marginBottom:'10px',maxHeight:'60px',overflow:'auto'},children:location.content.text}),/*#__PURE__*/_jsx(\"div\",{style:{height:'150px',marginBottom:'10px',overflow:'hidden'},children:(_location$content$med2=location.content.mediaUrls)===null||_location$content$med2===void 0?void 0:_location$content$med2.map((url,index)=>{const mediaType=location.content.mediaTypes[index];if(mediaType.startsWith('video/')){return/*#__PURE__*/_jsxs(\"video\",{controls:true,style:{width:'100%',height:'100%',objectFit:'cover'},children:[/*#__PURE__*/_jsx(\"source\",{src:\"http://localhost:3000/\".concat(url),type:mediaType}),\"Your browser does not support the video tag.\"]},index);}else{return/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:3000/\".concat(url),alt:\"Location media\",style:{width:'100%',height:'100%',objectFit:'cover',borderRadius:'4px'}},index);}})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[console.log('Checking edit/delete permissions:',{isAdmin:user.isAdmin,userId:user.userId||user._id,creatorId:location.creator._id,canEdit:user.isAdmin||location.creator._id===(user.userId||user._id)}),(user.isAdmin||location.creator._id===(user.userId||user._id))&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(location),style:{flex:1,padding:'8px',backgroundColor:'#2196F3',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(location._id),style:{flex:1,padding:'8px',backgroundColor:'#f44336',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"Delete\"})]})]})]})]},location._id);})})]});}export default ProfilePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProfilePage","_ref","_user$profile","user","onLocationUpdate","userLocations","setUserLocations","loading","setLoading","error","setError","editingLocation","setEditingLocation","editForm","setEditForm","text","newMedia","mediaToDelete","setMediaToDelete","navigate","fetchUserLocations","token","localStorage","getItem","console","log","endpoint","isAdmin","response","fetch","headers","concat","status","ok","Error","data","json","handleDelete","locationId","window","confirm","_id","method","errorData","filter","loc","err","message","handleEdit","location","creator","content","handleMediaDelete","index","handleUpdate","formData","FormData","append","length","forEach","file","JSON","stringify","body","updatedLocation","prevLocations","map","handleImmediateMediaDelete","mediaIndex","deleteMediaIndexes","children","style","padding","textAlign","onClick","backgroundColor","color","border","borderRadius","cursor","marginTop","display","flexDirection","alignItems","gap","fontSize","maxWidth","margin","justifyContent","marginBottom","boxShadow","profile","name","email","marginLeft","to","transition","gridTemplateColumns","_location$creator$pro","_location$content$med","_location$content$med2","width","height","overflow","value","onChange","e","_objectSpread","target","flex","resize","maxHeight","mediaUrls","url","position","mediaTypes","startsWith","objectFit","src","type","alt","top","right","multiple","accept","Array","from","files","mediaType","controls","userId","creatorId","canEdit"],"sources":["C:/Users/Admin/location-app/frontend/src/components/ProfilePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\nfunction ProfilePage({ user, onLocationUpdate }) {\r\n  const [userLocations, setUserLocations] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [editingLocation, setEditingLocation] = useState(null);\r\n  const [editForm, setEditForm] = useState({ text: '', newMedia: [] });\r\n  const [mediaToDelete, setMediaToDelete] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const fetchUserLocations = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      console.log('Fetching with token:', token);\r\n      \r\n      const endpoint = user.isAdmin ? \r\n        'http://localhost:3000/api/locations' : \r\n        'http://localhost:3000/api/user/locations';\r\n      \r\n      const response = await fetch(endpoint, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      console.log('Response status:', response.status);\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch locations');\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('Fetched locations:', data);\r\n      \r\n      setUserLocations(data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error fetching user locations:', error);\r\n      setError('Failed to fetch locations');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchUserLocations();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    console.log('Current user object:', user);\r\n  }, [user]);\r\n\r\n  const handleDelete = async (locationId) => {\r\n    if (window.confirm('Are you sure you want to delete this location?')) {\r\n      try {\r\n        console.log('Attempting to delete location:', locationId);\r\n        console.log('User ID:', user._id);\r\n        const token = localStorage.getItem('token');\r\n        \r\n        const response = await fetch(`http://localhost:3000/api/locations/${locationId}`, {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n\r\n        console.log('Delete response status:', response.status);\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json();\r\n          throw new Error(errorData.error || 'Failed to delete location');\r\n        }\r\n\r\n        setUserLocations(userLocations.filter(loc => loc._id !== locationId));\r\n        onLocationUpdate();\r\n      } catch (err) {\r\n        console.error('Delete error:', err);\r\n        setError(err.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEdit = (location) => {\r\n    console.log('Edit clicked for location:', location._id);\r\n    console.log('Current user:', user);\r\n    console.log('Location creator:', location.creator);\r\n    setEditingLocation(location);\r\n    setEditForm({ text: location.content.text, newMedia: [] });\r\n  };\r\n\r\n  const handleMediaDelete = (index) => {\r\n    setMediaToDelete([...mediaToDelete, index]);\r\n  };\r\n\r\n  const handleUpdate = async (locationId) => {\r\n    try {\r\n      console.log('Attempting to update location:', locationId);\r\n      console.log('Form data:', editForm); // Debug log\r\n      const token = localStorage.getItem('token');\r\n      \r\n      // Create FormData to handle both text and files\r\n      const formData = new FormData();\r\n      formData.append('text', editForm.text);\r\n      \r\n      // Add any new media files\r\n      if (editForm.newMedia && editForm.newMedia.length > 0) {\r\n        editForm.newMedia.forEach(file => {\r\n          formData.append('media', file);\r\n        });\r\n      }\r\n      \r\n      // Add media deletion indexes if any\r\n      if (mediaToDelete.length > 0) {\r\n        formData.append('deleteMediaIndexes', JSON.stringify(mediaToDelete));\r\n      }\r\n\r\n      const response = await fetch(`http://localhost:3000/api/locations/${locationId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n          // Note: Don't set Content-Type here, let browser set it for FormData\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      console.log('Update response status:', response.status);\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to update location');\r\n      }\r\n\r\n      const updatedLocation = await response.json();\r\n      console.log('Updated location:', updatedLocation);\r\n      \r\n      setUserLocations(prevLocations => \r\n        prevLocations.map(loc => \r\n          loc._id === locationId ? updatedLocation : loc\r\n        )\r\n      );\r\n      \r\n      setEditingLocation(null);\r\n      setMediaToDelete([]);\r\n      setEditForm({ text: '', newMedia: [] });\r\n      onLocationUpdate();\r\n    } catch (err) {\r\n      console.error('Update error:', err);\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  const handleImmediateMediaDelete = async (locationId, mediaIndex) => {\r\n    try {\r\n      console.log('Attempting to delete media at index:', mediaIndex);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      const response = await fetch(`http://localhost:3000/api/locations/${locationId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          deleteMediaIndexes: JSON.stringify([mediaIndex])\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to delete media');\r\n      }\r\n\r\n      const updatedLocation = await response.json();\r\n      setUserLocations(userLocations.map(loc => \r\n        loc._id === locationId ? updatedLocation : loc\r\n      ));\r\n      onLocationUpdate();\r\n    } catch (error) {\r\n      console.error('Error deleting media:', error);\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return <div>Please log in to view your profile.</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: '20px', textAlign: 'center' }}>\r\n        <p>Error: {error}</p>\r\n        <button \r\n          onClick={fetchUserLocations}\r\n          style={{\r\n            padding: '8px 16px',\r\n            backgroundColor: '#2196F3',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer',\r\n            marginTop: '10px'\r\n          }}\r\n        >\r\n          Retry\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ \r\n        padding: '20px', \r\n        textAlign: 'center',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        gap: '10px'\r\n      }}>\r\n        <div>Loading...</div>\r\n        <div style={{ fontSize: '14px', color: '#666' }}>\r\n          Fetching your locations...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '20px', maxWidth: '1200px', margin: '0 auto' }}>\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'space-between', \r\n        alignItems: 'center',\r\n        marginBottom: '20px',\r\n        backgroundColor: '#f5f5f5',\r\n        padding: '20px',\r\n        borderRadius: '8px',\r\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div>\r\n          <h2 style={{ \r\n            marginBottom: '8px',\r\n            color: '#333'\r\n          }}>\r\n            Welcome, {user?.profile?.name || 'User'}\r\n          </h2>\r\n          <p style={{ \r\n            color: '#666',\r\n            fontSize: '14px'\r\n          }}>\r\n            {user?.email}\r\n            {user.isAdmin && <span style={{ marginLeft: '8px', color: '#2196F3' }}>(Admin)</span>}\r\n          </p>\r\n        </div>\r\n        <Link to=\"/\">\r\n          <button style={{\r\n            padding: '8px 16px',\r\n            backgroundColor: '#2196F3',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer',\r\n            transition: 'background-color 0.3s'\r\n          }}>\r\n            Back to Map\r\n          </button>\r\n        </Link>\r\n      </div>\r\n\r\n      <h3>{user.isAdmin ? 'All Locations' : 'Your Locations'}</h3>\r\n      {loading ? (\r\n        <p>Loading...</p>\r\n      ) : error ? (\r\n        <p>Error: {error}</p>\r\n      ) : (\r\n        <div style={{ \r\n          display: 'grid',\r\n          gridTemplateColumns: 'repeat(auto-fit, minmax(315px, 1fr))',\r\n          gap: '20px',\r\n          justifyContent: 'center',\r\n          padding: '20px',\r\n          maxWidth: '1200px',\r\n          margin: '0 auto'\r\n        }}>\r\n          {userLocations.map(location => (\r\n            <div\r\n              key={location._id}\r\n              style={{\r\n                width: '275px',\r\n                height: '275px',\r\n                padding: '15px',\r\n                border: '1px solid #ddd',\r\n                borderRadius: '8px',\r\n                backgroundColor: 'white',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                overflow: 'hidden',\r\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\r\n                margin: '0 auto'\r\n              }}\r\n            >\r\n              {location.creator._id !== user._id && (\r\n                <div style={{ \r\n                  fontSize: '12px', \r\n                  color: '#666', \r\n                  marginBottom: '8px' \r\n                }}>\r\n                  Created by: {location.creator.profile?.name || location.creator.email}\r\n                </div>\r\n              )}\r\n              \r\n              {editingLocation?._id === location._id ? (\r\n                // Edit mode\r\n                <div style={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n                  <textarea\r\n                    value={editForm.text}\r\n                    onChange={(e) => setEditForm({ ...editForm, text: e.target.value })}\r\n                    style={{\r\n                      flex: '1',\r\n                      marginBottom: '10px',\r\n                      padding: '8px',\r\n                      borderRadius: '4px',\r\n                      border: '1px solid #ddd',\r\n                      resize: 'none'\r\n                    }}\r\n                  />\r\n                  <div style={{ marginBottom: '10px' }}>\r\n                    <div style={{ marginBottom: '10px', maxHeight: '100px', overflow: 'auto' }}>\r\n                      {location.content.mediaUrls?.map((url, index) => (\r\n                        <div key={index} style={{ \r\n                          marginBottom: '5px', \r\n                          position: 'relative',\r\n                          height: '60px',\r\n                          width: '100%'\r\n                        }}>\r\n                          {location.content.mediaTypes[index].startsWith('video/') ? (\r\n                            <video\r\n                              style={{\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                objectFit: 'cover',\r\n                                borderRadius: '4px'\r\n                              }}\r\n                            >\r\n                              <source src={`http://localhost:3000/${url}`} type={location.content.mediaTypes[index]} />\r\n                              Your browser does not support the video tag.\r\n                            </video>\r\n                          ) : (\r\n                            <img\r\n                              src={`http://localhost:3000/${url}`}\r\n                              alt={`Media ${index + 1}`}\r\n                              style={{\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                objectFit: 'cover',\r\n                                borderRadius: '4px'\r\n                              }}\r\n                            />\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleImmediateMediaDelete(location._id, index)}\r\n                            style={{\r\n                              position: 'absolute',\r\n                              top: '5px',\r\n                              right: '5px',\r\n                              padding: '2px 5px',\r\n                              backgroundColor: 'rgba(244, 67, 54, 0.9)',\r\n                              color: 'white',\r\n                              border: 'none',\r\n                              borderRadius: '2px',\r\n                              cursor: 'pointer',\r\n                              fontSize: '12px'\r\n                            }}\r\n                          >\r\n                            Delete\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\"image/*,video/*\"\r\n                      onChange={(e) => setEditForm({ ...editForm, newMedia: Array.from(e.target.files) })}\r\n                      style={{ marginBottom: '5px' }}\r\n                    />\r\n                  </div>\r\n                  <div style={{ display: 'flex', gap: '10px' }}>\r\n                    <button\r\n                      onClick={() => handleUpdate(location._id)}\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '8px',\r\n                        backgroundColor: '#4CAF50',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '4px',\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    >\r\n                      Save\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setEditingLocation(null);\r\n                        setMediaToDelete([]);\r\n                      }}\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '8px',\r\n                        backgroundColor: '#666',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '4px',\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                // Display mode\r\n                <div style={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n                  <div style={{ \r\n                    flex: '1',\r\n                    overflow: 'auto',\r\n                    marginBottom: '10px'\r\n                  }}>\r\n                    <p style={{ \r\n                      fontSize: '14px',\r\n                      marginBottom: '10px',\r\n                      maxHeight: '60px',\r\n                      overflow: 'auto'\r\n                    }}>\r\n                      {location.content.text}\r\n                    </p>\r\n                    <div style={{ \r\n                      height: '150px',\r\n                      marginBottom: '10px',\r\n                      overflow: 'hidden'\r\n                    }}>\r\n                      {location.content.mediaUrls?.map((url, index) => {\r\n                        const mediaType = location.content.mediaTypes[index];\r\n                        \r\n                        if (mediaType.startsWith('video/')) {\r\n                          return (\r\n                            <video\r\n                              key={index}\r\n                              controls\r\n                              style={{\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                objectFit: 'cover'\r\n                              }}\r\n                            >\r\n                              <source src={`http://localhost:3000/${url}`} type={mediaType} />\r\n                              Your browser does not support the video tag.\r\n                            </video>\r\n                          );\r\n                        } else {\r\n                          return (\r\n                            <img\r\n                              key={index}\r\n                              src={`http://localhost:3000/${url}`}\r\n                              alt=\"Location media\"\r\n                              style={{\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                objectFit: 'cover',\r\n                                borderRadius: '4px'\r\n                              }}\r\n                            />\r\n                          );\r\n                        }\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                  <div style={{ display: 'flex', gap: '10px' }}>\r\n                    {console.log('Checking edit/delete permissions:', {\r\n                      isAdmin: user.isAdmin,\r\n                      userId: user.userId || user._id,\r\n                      creatorId: location.creator._id,\r\n                      canEdit: user.isAdmin || location.creator._id === (user.userId || user._id)\r\n                    })}\r\n                    \r\n                    {(user.isAdmin || location.creator._id === (user.userId || user._id)) && (\r\n                      <>\r\n                        <button\r\n                          onClick={() => handleEdit(location)}\r\n                          style={{\r\n                            flex: 1,\r\n                            padding: '8px',\r\n                            backgroundColor: '#2196F3',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            cursor: 'pointer'\r\n                          }}\r\n                        >\r\n                          Edit\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDelete(location._id)}\r\n                          style={{\r\n                            flex: 1,\r\n                            padding: '8px',\r\n                            backgroundColor: '#f44336',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            cursor: 'pointer'\r\n                          }}\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfilePage; "],"mappings":"yHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAErD,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAA6B,KAAAC,aAAA,IAA5B,CAAEC,IAAI,CAAEC,gBAAiB,CAAC,CAAAH,IAAA,CAC7C,KAAM,CAACI,aAAa,CAAEC,gBAAgB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACmB,KAAK,CAAEC,QAAQ,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACqB,eAAe,CAAEC,kBAAkB,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACuB,QAAQ,CAAEC,WAAW,CAAC,CAAGxB,QAAQ,CAAC,CAAEyB,IAAI,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CACpE,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAA6B,QAAQ,CAAG3B,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAA4B,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CACFZ,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,KAAM,CAAAW,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3CC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEJ,KAAK,CAAC,CAE1C,KAAM,CAAAK,QAAQ,CAAGvB,IAAI,CAACwB,OAAO,CAC3B,qCAAqC,CACrC,0CAA0C,CAE5C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACH,QAAQ,CAAE,CACrCI,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYV,KAAK,CAClC,CACF,CAAC,CAAC,CAEFG,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEG,QAAQ,CAACI,MAAM,CAAC,CAEhD,GAAI,CAACJ,QAAQ,CAACK,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAC9C,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClCZ,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEU,IAAI,CAAC,CAEvC7B,gBAAgB,CAAC6B,IAAI,CAAC,CACtB3B,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACde,OAAO,CAACf,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtDC,QAAQ,CAAC,2BAA2B,CAAC,CACrCF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDjB,SAAS,CAAC,IAAM,CACd,GAAIY,IAAI,CAAE,CACRiB,kBAAkB,CAAC,CAAC,CACtB,CAAC,IAAM,CACLZ,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACL,IAAI,CAAC,CAAC,CAEVZ,SAAS,CAAC,IAAM,CACdiC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEtB,IAAI,CAAC,CAC3C,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAkC,YAAY,CAAG,KAAO,CAAAC,UAAU,EAAK,CACzC,GAAIC,MAAM,CAACC,OAAO,CAAC,gDAAgD,CAAC,CAAE,CACpE,GAAI,CACFhB,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAEa,UAAU,CAAC,CACzDd,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEtB,IAAI,CAACsC,GAAG,CAAC,CACjC,KAAM,CAAApB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,wCAAAE,MAAA,CAAwCO,UAAU,EAAI,CAChFI,MAAM,CAAE,QAAQ,CAChBZ,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYV,KAAK,CAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEFG,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEG,QAAQ,CAACI,MAAM,CAAC,CAEvD,GAAI,CAACJ,QAAQ,CAACK,EAAE,CAAE,CAChB,KAAM,CAAAU,SAAS,CAAG,KAAM,CAAAf,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAF,KAAK,CAACS,SAAS,CAAClC,KAAK,EAAI,2BAA2B,CAAC,CACjE,CAEAH,gBAAgB,CAACD,aAAa,CAACuC,MAAM,CAACC,GAAG,EAAIA,GAAG,CAACJ,GAAG,GAAKH,UAAU,CAAC,CAAC,CACrElC,gBAAgB,CAAC,CAAC,CACpB,CAAE,MAAO0C,GAAG,CAAE,CACZtB,OAAO,CAACf,KAAK,CAAC,eAAe,CAAEqC,GAAG,CAAC,CACnCpC,QAAQ,CAACoC,GAAG,CAACC,OAAO,CAAC,CACvB,CACF,CACF,CAAC,CAED,KAAM,CAAAC,UAAU,CAAIC,QAAQ,EAAK,CAC/BzB,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAEwB,QAAQ,CAACR,GAAG,CAAC,CACvDjB,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEtB,IAAI,CAAC,CAClCqB,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEwB,QAAQ,CAACC,OAAO,CAAC,CAClDtC,kBAAkB,CAACqC,QAAQ,CAAC,CAC5BnC,WAAW,CAAC,CAAEC,IAAI,CAAEkC,QAAQ,CAACE,OAAO,CAACpC,IAAI,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAC5D,CAAC,CAED,KAAM,CAAAoC,iBAAiB,CAAIC,KAAK,EAAK,CACnCnC,gBAAgB,CAAC,CAAC,GAAGD,aAAa,CAAEoC,KAAK,CAAC,CAAC,CAC7C,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAhB,UAAU,EAAK,CACzC,GAAI,CACFd,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAEa,UAAU,CAAC,CACzDd,OAAO,CAACC,GAAG,CAAC,YAAY,CAAEZ,QAAQ,CAAC,CAAE;AACrC,KAAM,CAAAQ,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C;AACA,KAAM,CAAAgC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAE5C,QAAQ,CAACE,IAAI,CAAC,CAEtC;AACA,GAAIF,QAAQ,CAACG,QAAQ,EAAIH,QAAQ,CAACG,QAAQ,CAAC0C,MAAM,CAAG,CAAC,CAAE,CACrD7C,QAAQ,CAACG,QAAQ,CAAC2C,OAAO,CAACC,IAAI,EAAI,CAChCL,QAAQ,CAACE,MAAM,CAAC,OAAO,CAAEG,IAAI,CAAC,CAChC,CAAC,CAAC,CACJ,CAEA;AACA,GAAI3C,aAAa,CAACyC,MAAM,CAAG,CAAC,CAAE,CAC5BH,QAAQ,CAACE,MAAM,CAAC,oBAAoB,CAAEI,IAAI,CAACC,SAAS,CAAC7C,aAAa,CAAC,CAAC,CACtE,CAEA,KAAM,CAAAW,QAAQ,CAAG,KAAM,CAAAC,KAAK,wCAAAE,MAAA,CAAwCO,UAAU,EAAI,CAChFI,MAAM,CAAE,KAAK,CACbZ,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYV,KAAK,CAChC;AACF,CAAC,CACD0C,IAAI,CAAER,QACR,CAAC,CAAC,CAEF/B,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEG,QAAQ,CAACI,MAAM,CAAC,CAEvD,GAAI,CAACJ,QAAQ,CAACK,EAAE,CAAE,CAChB,KAAM,CAAAU,SAAS,CAAG,KAAM,CAAAf,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAF,KAAK,CAACS,SAAS,CAAClC,KAAK,EAAI,2BAA2B,CAAC,CACjE,CAEA,KAAM,CAAAuD,eAAe,CAAG,KAAM,CAAApC,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAC7CZ,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEuC,eAAe,CAAC,CAEjD1D,gBAAgB,CAAC2D,aAAa,EAC5BA,aAAa,CAACC,GAAG,CAACrB,GAAG,EACnBA,GAAG,CAACJ,GAAG,GAAKH,UAAU,CAAG0B,eAAe,CAAGnB,GAC7C,CACF,CAAC,CAEDjC,kBAAkB,CAAC,IAAI,CAAC,CACxBM,gBAAgB,CAAC,EAAE,CAAC,CACpBJ,WAAW,CAAC,CAAEC,IAAI,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CACvCZ,gBAAgB,CAAC,CAAC,CACpB,CAAE,MAAO0C,GAAG,CAAE,CACZtB,OAAO,CAACf,KAAK,CAAC,eAAe,CAAEqC,GAAG,CAAC,CACnCpC,QAAQ,CAACoC,GAAG,CAACC,OAAO,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAoB,0BAA0B,CAAG,KAAAA,CAAO7B,UAAU,CAAE8B,UAAU,GAAK,CACnE,GAAI,CACF5C,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAE2C,UAAU,CAAC,CAC/D,KAAM,CAAA/C,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,wCAAAE,MAAA,CAAwCO,UAAU,EAAI,CAChFI,MAAM,CAAE,KAAK,CACbZ,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYV,KAAK,CAAE,CAClC,cAAc,CAAE,kBAClB,CAAC,CACD0C,IAAI,CAAEF,IAAI,CAACC,SAAS,CAAC,CACnBO,kBAAkB,CAAER,IAAI,CAACC,SAAS,CAAC,CAACM,UAAU,CAAC,CACjD,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAACxC,QAAQ,CAACK,EAAE,CAAE,CAChB,KAAM,CAAAU,SAAS,CAAG,KAAM,CAAAf,QAAQ,CAACQ,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAAF,KAAK,CAACS,SAAS,CAAClC,KAAK,EAAI,wBAAwB,CAAC,CAC9D,CAEA,KAAM,CAAAuD,eAAe,CAAG,KAAM,CAAApC,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAC7C9B,gBAAgB,CAACD,aAAa,CAAC6D,GAAG,CAACrB,GAAG,EACpCA,GAAG,CAACJ,GAAG,GAAKH,UAAU,CAAG0B,eAAe,CAAGnB,GAC7C,CAAC,CAAC,CACFzC,gBAAgB,CAAC,CAAC,CACpB,CAAE,MAAOK,KAAK,CAAE,CACde,OAAO,CAACf,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CC,QAAQ,CAACD,KAAK,CAACsC,OAAO,CAAC,CACzB,CACF,CAAC,CAED,GAAI,CAAC5C,IAAI,CAAE,CACT,mBAAOR,IAAA,QAAA2E,QAAA,CAAK,qCAAmC,CAAK,CAAC,CACvD,CAEA,GAAI7D,KAAK,CAAE,CACT,mBACEZ,KAAA,QAAK0E,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAH,QAAA,eACnDzE,KAAA,MAAAyE,QAAA,EAAG,SAAO,CAAC7D,KAAK,EAAI,CAAC,cACrBd,IAAA,WACE+E,OAAO,CAAEtD,kBAAmB,CAC5BmD,KAAK,CAAE,CACLC,OAAO,CAAE,UAAU,CACnBG,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SAAS,CACjBC,SAAS,CAAE,MACb,CAAE,CAAAV,QAAA,CACH,OAED,CAAQ,CAAC,EACN,CAAC,CAEV,CAEA,GAAI/D,OAAO,CAAE,CACX,mBACEV,KAAA,QAAK0E,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfC,SAAS,CAAE,QAAQ,CACnBQ,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,UAAU,CAAE,QAAQ,CACpBC,GAAG,CAAE,MACP,CAAE,CAAAd,QAAA,eACA3E,IAAA,QAAA2E,QAAA,CAAK,YAAU,CAAK,CAAC,cACrB3E,IAAA,QAAK4E,KAAK,CAAE,CAAEc,QAAQ,CAAE,MAAM,CAAET,KAAK,CAAE,MAAO,CAAE,CAAAN,QAAA,CAAC,4BAEjD,CAAK,CAAC,EACH,CAAC,CAEV,CAEA,mBACEzE,KAAA,QAAK0E,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEc,QAAQ,CAAE,QAAQ,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAjB,QAAA,eACpEzE,KAAA,QAAK0E,KAAK,CAAE,CACVU,OAAO,CAAE,MAAM,CACfO,cAAc,CAAE,eAAe,CAC/BL,UAAU,CAAE,QAAQ,CACpBM,YAAY,CAAE,MAAM,CACpBd,eAAe,CAAE,SAAS,CAC1BH,OAAO,CAAE,MAAM,CACfM,YAAY,CAAE,KAAK,CACnBY,SAAS,CAAE,2BACb,CAAE,CAAApB,QAAA,eACAzE,KAAA,QAAAyE,QAAA,eACEzE,KAAA,OAAI0E,KAAK,CAAE,CACTkB,YAAY,CAAE,KAAK,CACnBb,KAAK,CAAE,MACT,CAAE,CAAAN,QAAA,EAAC,WACQ,CAAC,CAAAnE,IAAI,SAAJA,IAAI,kBAAAD,aAAA,CAAJC,IAAI,CAAEwF,OAAO,UAAAzF,aAAA,iBAAbA,aAAA,CAAe0F,IAAI,GAAI,MAAM,EACrC,CAAC,cACL/F,KAAA,MAAG0E,KAAK,CAAE,CACRK,KAAK,CAAE,MAAM,CACbS,QAAQ,CAAE,MACZ,CAAE,CAAAf,QAAA,EACCnE,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE0F,KAAK,CACX1F,IAAI,CAACwB,OAAO,eAAIhC,IAAA,SAAM4E,KAAK,CAAE,CAAEuB,UAAU,CAAE,KAAK,CAAElB,KAAK,CAAE,SAAU,CAAE,CAAAN,QAAA,CAAC,SAAO,CAAM,CAAC,EACpF,CAAC,EACD,CAAC,cACN3E,IAAA,CAACF,IAAI,EAACsG,EAAE,CAAC,GAAG,CAAAzB,QAAA,cACV3E,IAAA,WAAQ4E,KAAK,CAAE,CACbC,OAAO,CAAE,UAAU,CACnBG,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SAAS,CACjBiB,UAAU,CAAE,uBACd,CAAE,CAAA1B,QAAA,CAAC,aAEH,CAAQ,CAAC,CACL,CAAC,EACJ,CAAC,cAEN3E,IAAA,OAAA2E,QAAA,CAAKnE,IAAI,CAACwB,OAAO,CAAG,eAAe,CAAG,gBAAgB,CAAK,CAAC,CAC3DpB,OAAO,cACNZ,IAAA,MAAA2E,QAAA,CAAG,YAAU,CAAG,CAAC,CACf7D,KAAK,cACPZ,KAAA,MAAAyE,QAAA,EAAG,SAAO,CAAC7D,KAAK,EAAI,CAAC,cAErBd,IAAA,QAAK4E,KAAK,CAAE,CACVU,OAAO,CAAE,MAAM,CACfgB,mBAAmB,CAAE,sCAAsC,CAC3Db,GAAG,CAAE,MAAM,CACXI,cAAc,CAAE,QAAQ,CACxBhB,OAAO,CAAE,MAAM,CACfc,QAAQ,CAAE,QAAQ,CAClBC,MAAM,CAAE,QACV,CAAE,CAAAjB,QAAA,CACCjE,aAAa,CAAC6D,GAAG,CAACjB,QAAQ,OAAAiD,qBAAA,CAAAC,qBAAA,CAAAC,sBAAA,oBACzBvG,KAAA,QAEE0E,KAAK,CAAE,CACL8B,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,OAAO,CACf9B,OAAO,CAAE,MAAM,CACfK,MAAM,CAAE,gBAAgB,CACxBC,YAAY,CAAE,KAAK,CACnBH,eAAe,CAAE,OAAO,CACxBM,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBqB,QAAQ,CAAE,QAAQ,CAClBb,SAAS,CAAE,2BAA2B,CACtCH,MAAM,CAAE,QACV,CAAE,CAAAjB,QAAA,EAEDrB,QAAQ,CAACC,OAAO,CAACT,GAAG,GAAKtC,IAAI,CAACsC,GAAG,eAChC5C,KAAA,QAAK0E,KAAK,CAAE,CACVc,QAAQ,CAAE,MAAM,CAChBT,KAAK,CAAE,MAAM,CACba,YAAY,CAAE,KAChB,CAAE,CAAAnB,QAAA,EAAC,cACW,CAAC,EAAA4B,qBAAA,CAAAjD,QAAQ,CAACC,OAAO,CAACyC,OAAO,UAAAO,qBAAA,iBAAxBA,qBAAA,CAA0BN,IAAI,GAAI3C,QAAQ,CAACC,OAAO,CAAC2C,KAAK,EAClE,CACN,CAEA,CAAAlF,eAAe,SAAfA,eAAe,iBAAfA,eAAe,CAAE8B,GAAG,IAAKQ,QAAQ,CAACR,GAAG,cACpC;AACA5C,KAAA,QAAK0E,KAAK,CAAE,CAAE+B,MAAM,CAAE,MAAM,CAAErB,OAAO,CAAE,MAAM,CAAEC,aAAa,CAAE,QAAS,CAAE,CAAAZ,QAAA,eACvE3E,IAAA,aACE6G,KAAK,CAAE3F,QAAQ,CAACE,IAAK,CACrB0F,QAAQ,CAAGC,CAAC,EAAK5F,WAAW,CAAA6F,aAAA,CAAAA,aAAA,IAAM9F,QAAQ,MAAEE,IAAI,CAAE2F,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAE,CAAE,CACpEjC,KAAK,CAAE,CACLsC,IAAI,CAAE,GAAG,CACTpB,YAAY,CAAE,MAAM,CACpBjB,OAAO,CAAE,KAAK,CACdM,YAAY,CAAE,KAAK,CACnBD,MAAM,CAAE,gBAAgB,CACxBiC,MAAM,CAAE,MACV,CAAE,CACH,CAAC,cACFjH,KAAA,QAAK0E,KAAK,CAAE,CAAEkB,YAAY,CAAE,MAAO,CAAE,CAAAnB,QAAA,eACnC3E,IAAA,QAAK4E,KAAK,CAAE,CAAEkB,YAAY,CAAE,MAAM,CAAEsB,SAAS,CAAE,OAAO,CAAER,QAAQ,CAAE,MAAO,CAAE,CAAAjC,QAAA,EAAA6B,qBAAA,CACxElD,QAAQ,CAACE,OAAO,CAAC6D,SAAS,UAAAb,qBAAA,iBAA1BA,qBAAA,CAA4BjC,GAAG,CAAC,CAAC+C,GAAG,CAAE5D,KAAK,gBAC1CxD,KAAA,QAAiB0E,KAAK,CAAE,CACtBkB,YAAY,CAAE,KAAK,CACnByB,QAAQ,CAAE,UAAU,CACpBZ,MAAM,CAAE,MAAM,CACdD,KAAK,CAAE,MACT,CAAE,CAAA/B,QAAA,EACCrB,QAAQ,CAACE,OAAO,CAACgE,UAAU,CAAC9D,KAAK,CAAC,CAAC+D,UAAU,CAAC,QAAQ,CAAC,cACtDvH,KAAA,UACE0E,KAAK,CAAE,CACL8B,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACde,SAAS,CAAE,OAAO,CAClBvC,YAAY,CAAE,KAChB,CAAE,CAAAR,QAAA,eAEF3E,IAAA,WAAQ2H,GAAG,0BAAAvF,MAAA,CAA2BkF,GAAG,CAAG,CAACM,IAAI,CAAEtE,QAAQ,CAACE,OAAO,CAACgE,UAAU,CAAC9D,KAAK,CAAE,CAAE,CAAC,+CAE3F,EAAO,CAAC,cAER1D,IAAA,QACE2H,GAAG,0BAAAvF,MAAA,CAA2BkF,GAAG,CAAG,CACpCO,GAAG,UAAAzF,MAAA,CAAWsB,KAAK,CAAG,CAAC,CAAG,CAC1BkB,KAAK,CAAE,CACL8B,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACde,SAAS,CAAE,OAAO,CAClBvC,YAAY,CAAE,KAChB,CAAE,CACH,CACF,cACDnF,IAAA,WACE+E,OAAO,CAAEA,CAAA,GAAMP,0BAA0B,CAAClB,QAAQ,CAACR,GAAG,CAAEY,KAAK,CAAE,CAC/DkB,KAAK,CAAE,CACL2C,QAAQ,CAAE,UAAU,CACpBO,GAAG,CAAE,KAAK,CACVC,KAAK,CAAE,KAAK,CACZlD,OAAO,CAAE,SAAS,CAClBG,eAAe,CAAE,wBAAwB,CACzCC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SAAS,CACjBM,QAAQ,CAAE,MACZ,CAAE,CAAAf,QAAA,CACH,QAED,CAAQ,CAAC,GA9CDjB,KA+CL,CACN,CAAC,CACC,CAAC,cACN1D,IAAA,UACE4H,IAAI,CAAC,MAAM,CACXI,QAAQ,MACRC,MAAM,CAAC,iBAAiB,CACxBnB,QAAQ,CAAGC,CAAC,EAAK5F,WAAW,CAAA6F,aAAA,CAAAA,aAAA,IAAM9F,QAAQ,MAAEG,QAAQ,CAAE6G,KAAK,CAACC,IAAI,CAACpB,CAAC,CAACE,MAAM,CAACmB,KAAK,CAAC,EAAE,CAAE,CACpFxD,KAAK,CAAE,CAAEkB,YAAY,CAAE,KAAM,CAAE,CAChC,CAAC,EACC,CAAC,cACN5F,KAAA,QAAK0E,KAAK,CAAE,CAAEU,OAAO,CAAE,MAAM,CAAEG,GAAG,CAAE,MAAO,CAAE,CAAAd,QAAA,eAC3C3E,IAAA,WACE+E,OAAO,CAAEA,CAAA,GAAMpB,YAAY,CAACL,QAAQ,CAACR,GAAG,CAAE,CAC1C8B,KAAK,CAAE,CACLsC,IAAI,CAAE,CAAC,CACPrC,OAAO,CAAE,KAAK,CACdG,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SACV,CAAE,CAAAT,QAAA,CACH,MAED,CAAQ,CAAC,cACT3E,IAAA,WACE+E,OAAO,CAAEA,CAAA,GAAM,CACb9D,kBAAkB,CAAC,IAAI,CAAC,CACxBM,gBAAgB,CAAC,EAAE,CAAC,CACtB,CAAE,CACFqD,KAAK,CAAE,CACLsC,IAAI,CAAE,CAAC,CACPrC,OAAO,CAAE,KAAK,CACdG,eAAe,CAAE,MAAM,CACvBC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SACV,CAAE,CAAAT,QAAA,CACH,QAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAEN;AACAzE,KAAA,QAAK0E,KAAK,CAAE,CAAE+B,MAAM,CAAE,MAAM,CAAErB,OAAO,CAAE,MAAM,CAAEC,aAAa,CAAE,QAAS,CAAE,CAAAZ,QAAA,eACvEzE,KAAA,QAAK0E,KAAK,CAAE,CACVsC,IAAI,CAAE,GAAG,CACTN,QAAQ,CAAE,MAAM,CAChBd,YAAY,CAAE,MAChB,CAAE,CAAAnB,QAAA,eACA3E,IAAA,MAAG4E,KAAK,CAAE,CACRc,QAAQ,CAAE,MAAM,CAChBI,YAAY,CAAE,MAAM,CACpBsB,SAAS,CAAE,MAAM,CACjBR,QAAQ,CAAE,MACZ,CAAE,CAAAjC,QAAA,CACCrB,QAAQ,CAACE,OAAO,CAACpC,IAAI,CACrB,CAAC,cACJpB,IAAA,QAAK4E,KAAK,CAAE,CACV+B,MAAM,CAAE,OAAO,CACfb,YAAY,CAAE,MAAM,CACpBc,QAAQ,CAAE,QACZ,CAAE,CAAAjC,QAAA,EAAA8B,sBAAA,CACCnD,QAAQ,CAACE,OAAO,CAAC6D,SAAS,UAAAZ,sBAAA,iBAA1BA,sBAAA,CAA4BlC,GAAG,CAAC,CAAC+C,GAAG,CAAE5D,KAAK,GAAK,CAC/C,KAAM,CAAA2E,SAAS,CAAG/E,QAAQ,CAACE,OAAO,CAACgE,UAAU,CAAC9D,KAAK,CAAC,CAEpD,GAAI2E,SAAS,CAACZ,UAAU,CAAC,QAAQ,CAAC,CAAE,CAClC,mBACEvH,KAAA,UAEEoI,QAAQ,MACR1D,KAAK,CAAE,CACL8B,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACde,SAAS,CAAE,OACb,CAAE,CAAA/C,QAAA,eAEF3E,IAAA,WAAQ2H,GAAG,0BAAAvF,MAAA,CAA2BkF,GAAG,CAAG,CAACM,IAAI,CAAES,SAAU,CAAE,CAAC,+CAElE,GAVO3E,KAUA,CAAC,CAEZ,CAAC,IAAM,CACL,mBACE1D,IAAA,QAEE2H,GAAG,0BAAAvF,MAAA,CAA2BkF,GAAG,CAAG,CACpCO,GAAG,CAAC,gBAAgB,CACpBjD,KAAK,CAAE,CACL8B,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACde,SAAS,CAAE,OAAO,CAClBvC,YAAY,CAAE,KAChB,CAAE,EARGzB,KASN,CAAC,CAEN,CACF,CAAC,CAAC,CACC,CAAC,EACH,CAAC,cACNxD,KAAA,QAAK0E,KAAK,CAAE,CAAEU,OAAO,CAAE,MAAM,CAAEG,GAAG,CAAE,MAAO,CAAE,CAAAd,QAAA,EAC1C9C,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAE,CAChDE,OAAO,CAAExB,IAAI,CAACwB,OAAO,CACrBuG,MAAM,CAAE/H,IAAI,CAAC+H,MAAM,EAAI/H,IAAI,CAACsC,GAAG,CAC/B0F,SAAS,CAAElF,QAAQ,CAACC,OAAO,CAACT,GAAG,CAC/B2F,OAAO,CAAEjI,IAAI,CAACwB,OAAO,EAAIsB,QAAQ,CAACC,OAAO,CAACT,GAAG,IAAMtC,IAAI,CAAC+H,MAAM,EAAI/H,IAAI,CAACsC,GAAG,CAC5E,CAAC,CAAC,CAED,CAACtC,IAAI,CAACwB,OAAO,EAAIsB,QAAQ,CAACC,OAAO,CAACT,GAAG,IAAMtC,IAAI,CAAC+H,MAAM,EAAI/H,IAAI,CAACsC,GAAG,CAAC,gBAClE5C,KAAA,CAAAE,SAAA,EAAAuE,QAAA,eACE3E,IAAA,WACE+E,OAAO,CAAEA,CAAA,GAAM1B,UAAU,CAACC,QAAQ,CAAE,CACpCsB,KAAK,CAAE,CACLsC,IAAI,CAAE,CAAC,CACPrC,OAAO,CAAE,KAAK,CACdG,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SACV,CAAE,CAAAT,QAAA,CACH,MAED,CAAQ,CAAC,cACT3E,IAAA,WACE+E,OAAO,CAAEA,CAAA,GAAMrC,YAAY,CAACY,QAAQ,CAACR,GAAG,CAAE,CAC1C8B,KAAK,CAAE,CACLsC,IAAI,CAAE,CAAC,CACPrC,OAAO,CAAE,KAAK,CACdG,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SACV,CAAE,CAAAT,QAAA,CACH,QAED,CAAQ,CAAC,EACT,CACH,EACE,CAAC,EACH,CACN,GA1OIrB,QAAQ,CAACR,GA2OX,CAAC,EACP,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAAzC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}